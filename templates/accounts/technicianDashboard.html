{% extends "base.html" %}

{% block content %}

<div class="container-fluid">
    <div class="row">
      <div class="col-md-5 px-5" style="background-color: #e5f1ff; height: 730px; max-width: 50%;">
        {% if user.profile_picture %}
        <img src="{{user.profile_picture.url}}" alt="Profile Photo" class="img-fluid rounded-circle m-3" style="width: 150px; height: 150px;"> 
        {% else %}
        <p>No profile picture available</p>
        {% endif %}

        <div style='margin-left: 30px; margin-top: 10px;'>
          <h2 class='fw-bold'>Welcome back,</h2>
          <h2 class='fw-bold'>{{user.username}}</h2>
        </div>

        <div style='margin-left: 30px; margin-top: 80px;'>
          <div class='d-flex gap-2'>
            <h5 class='fw-bold'>Phone Number:</h5><h5 class='text-secondary' style='margin-top: 1px;'>{{user.phone_number}}</h5>
          </div>

          <div class='d-flex gap-2 mt-2'>
            <h5 class='fw-bold'>Service Type:</h5><h5 class='text-secondary' style='margin-top: 1px;'>{{technician.service_type}}</h5>
          </div>
          <div class='mt-2'>
            <h5 class='fw-bold'>Technician Description:</h5><h5 class='text-secondary'>{{technician.technician_description}}</h5>
          </div>

        </div>
      </div>

      <div class="col-md-6 mt-2 mx-5">
        <h5>Hi, <span class='text-danger'>{{user.email}}</span></h5>
        <form class="d-flex flex-column border border-dark rounded-3 p-3" method="post" action="{% url "updateTechnicianInfo" %}">
          {% csrf_token %}  
          <div class="row mb-3">
              <h3 class="mb-3 text-center">Personal Information</h3>
              <div class="col-md-6">
                  <label for="first_name" class="form-label">First Name:</label>
                  <input type="text" class="form-control border border-dark rounded-3" id="first_name" name="first_name" value="{{ user.first_name }}">
              </div>
              <div class="col-md-6">
                  <label for="last_name" class="form-label">Last Name:</label>
                  <input type="text" class="form-control border border-dark rounded-3" id="last_name" name="last_name" value="{{ user.last_name }}">
              </div>
          </div>
          <div class="mb-2">
              <label for="phone_number" class="form-label">Contact:</label>
              <input type="text" class="form-control border border-dark rounded-3" id="phone_number" name="phone_number" value="{{ user.phone_number }}">
          </div>
          <div class="mb-2">
              <label for="service_charge" class="form-label">Price:</label>
              <input type="number" class="form-control border border-dark rounded-3" id="service_charge" name="service_charge" value="{{ technician.service_charge }}">
          </div>
          <div class="d-flex justify-content-end">
              <button type="submit" class="btn gap-4 px-5 fw-bold" style="background-color: #070441; color: white;">Save</button>
          </div>
      </form>
      
        <div class="col-md-13 mt-4 mb-2">
          <form class="d-flex flex-column border border-dark rounded-3 p-3" method="post" action="{% url "changePassTech" %}"> 
            {% csrf_token %} 
            <div class="row mb-3">
              <h3 class="mb-1 text-center">Change Password</h3>
              <span class='text-center' style="margin-left: auto; color: rgb(192, 11, 11);">Forgot Password?</span><br>
              <div class="mb-2">
                <label for="current_password" class="form-label">Current Password:</label>
                <input type="text" class="form-control border border-dark rounded-3" id="current_password" name="current_password">
              </div>
              <div class="col-md-6">
                <label for="new_password" class="form-label">New Password:</label>
                <input type="text" class="form-control border border-dark rounded-3" id="new_password" name="new_password">
              </div>
              <div class="col-md-6">
                <label for="confirm_password" class="form-label">Confirm Password:</label>
                <input type="text" class="form-control border border-dark rounded-3" id="confirm_password" name="confirm_password">
              </div>
            </div>
            
            <div class="d-flex justify-content-end">
              <button type="submit" class="btn px-5 fw-bold" style="background-color: #070441; color: white;">Save</button>
            </div>
          </form>
        </div>
      </div>
      
    </div>
  </div>
  </div>
</div>

{% include "includes/alerts.html" %}

{% endblock  %}